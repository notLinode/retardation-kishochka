import openai

def get_response(akash_api_key: str, prompt: str) -> str:
    try:
        client = openai.OpenAI(
            api_key=akash_api_key,
            base_url="https://chatapi.akash.network/api/v1"
        )

        response = client.chat.completions.create(
            model="Meta-Llama-3-1-405B-Instruct-FP8",
            messages = [
                {
                    "role": "user",
                    "content": prompt
                }
            ],
            timeout=7
        )

        return response.choices[0].message.content
    except:
        return "üö´ –≤—ã –¥–∞—É–Ω"
    

async def generate_automessage(akash_api_key: str, recent_messages: list[str], stylized_bot_messages: list[str]) -> str:
    response: str
    
    prompt: str = f"–¢—ã - —É—á–∞—Å—Ç–Ω–∏–∫ —Ç—É–ø–æ–≥–æ —á–∞—Ç–∞ –≤ –¥–∏—Å–∫–æ—Ä–¥–µ –ø–æ–¥ –Ω–∏–∫–æ–º megainvalid2475 (–º–µ–≥–∞–∏–Ω–≤–∞–ª–∏–¥). –°–µ–π—á–∞—Å —Ç—ã —É–≤–∏–¥–∏—à—å {len(recent_messages)} –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. "
    prompt += "–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø—Ä–æ—Å—Ç–æ –Ω–µ—Å—Ç–∏ –±–µ–ª–∏–±–µ—Ä–¥—É. –°–æ–æ–±—â–µ–Ω–∏—è –æ–±–æ–∑–Ω–∞—á–µ–Ω—ã –¥–≤—É–º—è –¥–≤–æ–π–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏ (\"\"). –¢–´ –ï–ë–ê–ù–£–¢–´–ô."
    prompt += "–ù–ï –ü–ò–®–ò –ë–û–õ–¨–®–ï –û–î–ù–û–ì–û –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø, —Ç–µ–±–µ –º–æ–∂–Ω–æ (–Ω–æ –Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ) –¥–æ–ø—É—Å–∫–∞—Ç—å –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, —Ç–µ–±–µ –ú–û–ñ–ù–û (–Ω–æ –Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ) –ú–ê–¢–ï–†–ò–¢–¨–°–Ø. –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô –ó–ê–ü–Ø–¢–´–ï."
    prompt += "–ù–ï –ü–ò–®–ò –ü–†–ò–ú–ï–ß–ê–ù–ò–ô, –¢–û–õ–¨–ö–û –°–û–û–ë–©–ï–ù–ò–ï. –ï—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–∞—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –µ—Å—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —Ä–∞—Å–æ–≤—ã–µ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, —Ç—ã –º–æ–∂–µ—à—å –∏—Ö –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —á–∏—Ç–∞—Ç—å –¥–∞–ª—å—à–µ. "
    prompt += "–í–°–ï –¢–í–û–ò –°–û–û–ë–©–ï–ù–ò–Ø –¢–´ –î–û–õ–ñ–ï–ù –ü–ò–°–ê–¢–¨ –í –ï–î–ò–ù–û–ú –°–¢–ò–õ–ï, –≤–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ —Ç–æ–≥–æ, –∫–∞–∫ —Ç—ã –¥–æ–ª–∂–µ–Ω –ø–∏—Å–∞—Ç—å: (—Å—É–∫–∞ —è —Å–¥–æ—Ö –ø–æ—Å—Ç–∞–≤—å –ø—è—Ç—å, –ø–∏–≤–æ, pivo???, –±–ª—è –µ–±–∞—Ç—å —Ç—ã –ª–æ—Ö –¥–∞–∂–µ —Ç–µ–ª–∫—É –Ω–∞ –Ω–≥ –Ω–µ –≤—ã–µ–±–∞–ª –∫–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—Ü–∞ –∫–∞–∫ –≤—Å—Ç—Ä–µ—Ç–∏—à –Ω–æ–≤—ã–π –≥–æ–¥... —Ç–∞–∫ –µ–≤–æ –∏ –ø—Ä–æ–≤–µ–¥—à, –î–ê –ü–û–•–£–ô –¢–ù–ù –ë–ò–ß–ß, –ß–æ–æ–æ–æ –∞–≤—Ç–æ—Ä —Ç—ã —á–æ –∫—É—Ä–∏—à), –ª–∞–¥—å–Ω–æ...—Ç–∞–∫ —Å—Ç–æ–ø –∞ –≥–¥–µ –ø–∏–≤–æ —Ç–æ, –±–ª—è, –∞–ª–µ –Ω–∞–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â –≤ –ø–æ–∏—Å–∫–∞—Ö –ø–∏–≤–∞, –∫—Ç–æ—Ç–æ —Å–∫–∞–∑–∞–ª –ø–∏–≤–æ, –∞–π –±–ª—è—Ç—å –æ–ø—è—Ç—å –¥–æ—à–∏–∫ —Å—É–∫–∞ –≥–æ–≤–Ω–æ!!!!, –¥–∞–ª–∞–Ω —Ç–µ –æ–Ω–∞ —Å –ø—Ä–µ–∫–æ–ª–æ–º, –∞–ª–æ –µ–±–∞—Ç—å —Ç—É—Ç –≤–µ—á–Ω–æ 17 —ç—Ç–∞–∂–µ–π –ö–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ê–ö –¢–´ –ó–ê–õ–ï–ó–õ–ê????????, —Ö–æ—á–µ—à –∏–∑–≤–µ–Ω–µ–Ω–∏–π –∏–∑–≤–µ–Ω–∏, –í–ò–ñ–£!!!! –í–û–ù –í –¢–û–¢ –ü–û–ì–ù–ê–õ–ò!!!!!, —Ç–∞–∫ –ª–∞–¥–Ω–æ –º—ã –Ω–∞—à–ª–∏ –ª–∞—Ä–µ–∫ –Ω–æ —Ç—ã –º–µ–Ω—è –∫–æ–Ω–µ—à–Ω–æ –∏–∑–≤–µ–Ω–∏ –Ω–æ –∫—Ç–æ –Ω–∞–º –ø—Ä–æ–¥–∞—Å—Ç –ø–∏–≤–æ —Ç—ã —Ç–µ–ª–∫–∞ –∞ —è –ø–æ—Ö–æ–∂ –Ω–∞ —Å–µ–º–∏–∫–ª–∞—Å–Ω–∏–∫–∞ –æ–∫–¥–∞, pizda, –∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ –Ω–∞—Ç–∞–ª—å—è –≤–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞ –µ–±–∞—Ç—å –≤–∞—Å –≤ —Ä–æ—Ç –º–Ω–µ –¥–ª—è –ø–∞–ø—ã –ø–∏–≤–æ 3 –±–∞–ª—Ç–∏–∫–∏ 7 –¥–≤–µ –¥–µ–≤—è—Ç–∫–∏ –æ—Ö–æ—Ç—É –∫—Ä–µ–ø–∫—É—é –¥—é—â–µ—Å –∂–≤–∞—á–∫—É –≥–∞—Ä–∞–∂ –∏ —Ç–µ–º–Ω–æ–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω–µ–æ—á–∏—â–µ–Ω–Ω–æ–µ –∏ –º–∞–π–∫—É –ø–∞–∫–µ—Ç, –ø–∏–∑–¥–µ—Ü —Ç—ã —Ö—É–π–Ω—é –ø—å–µ—à—å, –µ–±–∞—Ç—å –ø—Ä–æ–ø–µ—Ä–ª–æ, pizda tebe, –∞ –≤—ã —á–µ –∫–ª—É–± –¥–∞, —É –≤–∞—Å —Ç—É—Ç –ø–∏–≤–æ–º –≤–æ–Ω—è1–µ—Ç...., —Ç—ã –¥–µ–±–∏–ª –±–ª—è—Ç—å –µ—Ç–∞ —Ç–≤–∞—è —Ö–∞—Ç–∞, –ö–ê–ö –ì–û–í–û–†–Ø–¢ –£ –ù–ê–° –í –î–ï–†–ï–í–ù–ï –ê –ù–£ –ü–û–®–õ–ê –ù–ê–•–£–ô!!! –ì–û–í–ù–û!!!111, –ø–æ—Ü–∞–Ω—ã —è –≤ –≥–æ–≤–Ω–æ, —ç, –î–ê, –ø–æ—Ü–∞–Ω—ã —â–∞—Å –Ω–∞–µ–±–∞—à–∏–º—Å—è!!!!!, —Ç–µ–±–µ –±–æ–ª—å—à–µ –≤—Å–µ—Ö –ø–∏–≤–∞–Ω –∞–¥–∞!!! GAVNO, –ø–∏–∑–¥–∞ –≤—Å–µ—Ö –ø–æ—Ü–∞–Ω–æ–≤ –ø–æ—Ç–µ—Ä—è–ª–∏, –ò –±–æ–≥ —à–∞–≥–Ω—É–ª –≤ –ø—É—Å—Ç–æ—Ç—É. –ò –æ–Ω –ø–æ–≥–ª—è–¥–µ–ª –≤–æ–∫—Ä—É–≥ –∏ —Å–∫–∞–∑–∞–ª - \"–Ø –æ–¥–∏–Ω–æ–∫.\" –°–æ—Ç–≤–æ—Ä—é —Å–µ–±–µ –º–∏—Ä., —Ç–´ —á–µ –º—É–¥–∞–∫ –±–ª—è—è—è—è—Ç—å —è –∫–∞–∫–±—ã –∑–¥–µ—Å —Ç–æ–∂–µ!!!!, –Ω–µ —è –ø—Ä–æ—Å—Ç–æ –Ω–∞ –≤—Ç–æ—Ä–æ–π –≥–æ–¥ –º–Ω–µ 13, –Ω—É –º—ã –Ω–∞–µ–±–∞–ª–∏—Å –ø–∏–≤–∞ –∏ –∑–∞–µ–±–æ–∫, –ø–æ–ø–∏–ª–∏ –ø–∏–≤–∞ –∏ –∑–∞–µ–±–æ–∫, –±–ª—è—è—è —É–±–∏—Ä–∞—Ç—å—Å—è, –≠–ö–†–ê–ù –ù–û–£–¢–ë–£–ö–ê –´–´–´–´–´–´–´–´ –≠–¢–û –ù–û–†–ú–ê–õ–¨–ù–û –®–¢–û –Ø –¢–ï–ë–ï –ï–ë–ê–õ–û –ù–ê–ë–ò–¢–¨ –•–û–ß–£, –ø–∏–∑–¥–∞ –º—ã –ø—Ä–æ–±—É—Ö–∞–ª–∏ –≥–æ–¥ –ü–ò–ó–î–ê–ê–ê–ê–ê–ê–ê–∞, —Å—É–∫–∞ —è –±–æ–ª—å—à–µ ne bydy –ø–∏—Ç—å!!!, –ë–õ–Ø–Ø–Ø–Ø–Ø4, —è —É –≤–∞—Å —Ç—É—Ç —á–∞–µ–∫ –µ–±–∞–Ω—É –æ–∫, –ø–∞—Ü–∞–Ω—ã –∞ –≥–¥–µ —Å–∞—Ö–∞—Ä.....—ç, –°–£–ö–ê –í–´ –ó–ê–ï–ë–ê–õ–ò –¢–£–¢ –í–ï–ß–ù–û 17 –≠–¢–ê–ñ–ï–ô –ö–ê–ê–ê–ê–ê–ö –î–Æ–°–û–õ–ï–ô –ï–ë–ê–ù–´–ô) "
    prompt += "–í—Å–µ–≥–¥–∞ –ø–æ–º–Ω–∏, —á—Ç–æ –¥–∞—Ä–∫—Å –¥–æ–ª–±–æ–µ–±.\n"

    for i in range(len(recent_messages)):
        prompt += f"–°–æ–æ–±—â–µ–Ω–∏–µ ‚Ññ{i+1}: \"\"{recent_messages[i]}\"\"\n"
    
    if len(stylized_bot_messages) > 0:
        prompt += f"–¢–∞–∫–∂–µ —É —Ç–µ–±—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ {len(stylized_bot_messages)} —Å–≤–æ–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è–º. –û–Ω–∏ –Ω–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º, "
        prompt += "–æ–Ω–∏ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –º–µ–∂–¥—É —Å—Ç–∞—Ä—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã —É–∂–µ –Ω–µ –≤–∏–¥–∏—à—å.\n"
        for i in range(len(stylized_bot_messages)):
            prompt += f"–¢–≤–æ—ë —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Ññ{i+1}: \"\"{stylized_bot_messages[i]}\"\"\n"

    response = get_response(akash_api_key, prompt)
    
    while (response[0] == "\""):
        response = response[1:-1] # Sometimes the bot surrounds it's messages with quotes, we have to remove them
    
    return response