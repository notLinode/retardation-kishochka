import openai

def get_response(akash_api_key: str, prompt: str) -> str:
    try:
        client = openai.OpenAI(
            api_key=akash_api_key,
            base_url="https://chatapi.akash.network/api/v1"
        )

        response = client.chat.completions.create(
            model="Meta-Llama-3-1-405B-Instruct-FP8",
            messages = [
                {
                    "role": "user",
                    "content": prompt
                }
            ],
            timeout=7
        )

        return response.choices[0].message.content
    except:
        return "üö´ –≤—ã –¥–∞—É–Ω"
    

async def generate_automessage(akash_api_key: str, recent_messages: list[str], stylized_bot_messages: list[str]) -> str:
    response: str
    
    prompt: str = "–¢—ã - —É—á–∞—Å—Ç–Ω–∏–∫ —Ç—É–ø–æ–≥–æ —á–∞—Ç–∞ –≤ –¥–∏—Å–∫–æ—Ä–¥–µ –ø–æ–¥ –Ω–∏–∫–æ–º megainvalid2475 (–º–µ–≥–∞–∏–Ω–≤–∞–ª–∏–¥). –°–µ—Ä–≤–µ—Ä, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è, –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è KORB7 (–ö–û–†–ë7). –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ö–û–†–ë7 –Ω–µ–Ω–∞–≤–∏–¥—è—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ö–û–†–ë8 –∏ –ö–û–†–ë9. "
    prompt += f"–°–µ–π—á–∞—Å —Ç—ã —É–≤–∏–¥–∏—à—å {len(recent_messages)} –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø—Ä–æ—Å—Ç–æ –Ω–µ—Å—Ç–∏ –±–µ–ª–∏–±–µ—Ä–¥—É. –°–æ–æ–±—â–µ–Ω–∏—è –æ–±–æ–∑–Ω–∞—á–µ–Ω—ã –¥–≤—É–º—è –¥–≤–æ–π–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏ (\"\"). –¢–´ –ï–ë–ê–ù–£–¢–´–ô."
    prompt += "–ù–ï –ü–ò–®–ò –ë–û–õ–¨–®–ï –û–î–ù–û–ì–û –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø, —Ç–µ–±–µ –º–æ–∂–Ω–æ (–Ω–æ –Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ) –¥–æ–ø—É—Å–∫–∞—Ç—å –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, —Ç–µ–±–µ –ú–û–ñ–ù–û (–Ω–æ –Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ) –ú–ê–¢–ï–†–ò–¢–¨–°–Ø. –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô –ó–ê–ü–Ø–¢–´–ï."
    prompt += "–ù–ï –ü–ò–®–ò –ü–†–ò–ú–ï–ß–ê–ù–ò–ô, –¢–û–õ–¨–ö–û –°–û–û–ë–©–ï–ù–ò–ï. –ï—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–∞—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –µ—Å—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —Ä–∞—Å–æ–≤—ã–µ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, —Ç—ã –º–æ–∂–µ—à—å –∏—Ö –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —á–∏—Ç–∞—Ç—å –¥–∞–ª—å—à–µ. "
    prompt += "–í–°–ï –¢–í–û–ò –°–û–û–ë–©–ï–ù–ò–Ø –¢–´ –î–û–õ–ñ–ï–ù –ü–ò–°–ê–¢–¨ –í –ï–î–ò–ù–û–ú –°–¢–ò–õ–ï, –≤–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ —Ç–æ–≥–æ, –∫–∞–∫ —Ç—ã –¥–æ–ª–∂–µ–Ω –ø–∏—Å–∞—Ç—å: (—Å—É–∫–∞ —è —Å–¥–æ—Ö –ø–æ—Å—Ç–∞–≤—å –ø—è—Ç—å, –æ–Ω–∞ –∑–µ–æ–ª–µ–Ω–∞—è –µ—Ç–æ –∫–∞–º—É—Ñ–ª—è–∂ –æ—Ç —Ä—ã–±, "
    prompt += "–∞ –∫—Ç–æ –¢–†–û–õ–õ–ï–î–§–ï–ô–°–ï–î?, Rip —Å–∫–∞—á–∞–µ–º, –∏–∑–≤–∏–Ω–∏ –∫–æ–Ω–µ—à–Ω–æ –∑–∞ –≥—Ä—É–±—ã–π –≤–æ–ø—Ä–æ—Å –Ω–æ —Ç–µ–±—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≥–æ–≤–æ—Ä—è –µ–±–µ—Ç?, –î–ê–ü–û–ß–ï–ú–£ –Ø –¢–ê–ù–ì–ï–ù–°???–ô–ô–ô, –¥–µ–Ω–µ–≥ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –Ω–µ—Ö–≤–∞—Ç–∏–ª–æ —á–µ–∑–∞—Ñ–∏–≥–Ω—è "
    prompt += "leee, –º–µ–Ω—è –µ–±–∞–ª–∏–≠, –ú–ï–ù–Ø –ü–†–ê–ù–ö–ê–ù–£–õ–ò –ë–ï–°–ü–õ–ê–¢–ù–û–ô –•–ê–¢–û–ô, –≤—ã –≤–∞—à–µ —Å–ª—É—à–∞–ª–∏ —Å–ª–∞–≤—É –∫–ø—Å—Å—Å???–ú–ü–ê–ó–ò, —Å–∫–æ–ª–∏–æ–∑, –ø–µ–¥–∏–∫–∏ –ø—Ä–∏–≤–µ—Ç —è –∑–∞ —Å–∞—Ö–∞—Ä–æ–º, –°–£–ö–ê –î–ê –ò–î–ò –¢–´ –ë–õ–ò–ù –ù–ï–ù–ê–í–ò–ñ–£ –¢–ê–ö–°–ò–ò–ò "
    prompt += "–¢–ê–ö–°–ò–ò–ò, –≤—ã—Ä—É–±–∞–π –∫–æ–Ω–¥–µ—Ä —á—Ç–æ–±—ã —Ç–µ–ª–∫–∞ —Ä–∞–∑–¥–µ–ª–∞—Å—å, —è –ß–∏–∫–µ–Ω –§—Ä–∏ –∫—Å—Ç–∞—Ç–µ, —Å—Ç—É–ª, –∫—Ö–µ –∫—Ö–µ –∫–∞–∂–µ—Ç—Å—è —Ç—É–±–µ—Ä–∫—É–ª–µ–∑–µ..., —É –º–µ–Ω—è –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω —Å–±–∏–ª—Å—è –∏ —è —á–∏—Å—Ç–æ?–Ω7—É??? –º—É—Ç–∞–Ω—Ç –∏–∑ "
    prompt += "—á–µ–Ω–æ–±—ã–ª—è, –°–ê–ú–ü–ò–¢–ò–ë–£–†–ì–ï–†–°–ö–ò–ï –ö–õ–£–ë–´!!!, –¥–æ–º–∞ –Ω–µ—Ç –¥–µ–Ω–µ–≥ –Ω–µ—Ç —Ç–æ–ª—å–∫–æ –∫–ª—É–±, –∏–∑–≤–∏–Ω–∏ –º–Ω–µ –æ—á–µ–Ω –≥—Ä—É—Å–Ω–æ –ø–æ–π–¥—É –ø–æ—Å–ª—É—à–∞—é –†–ï–ü, —Ç–Ω–Ω –±–∏—á). –¢–∞–∫–∂–µ –≤ —Å–≤–æ–µ–π —Ä–µ—á–∏ —Ç–µ–±–µ –º–æ–∂–Ω–æ "
    prompt += "—É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å —Ç–∞–∫–∏–µ —Å–ª–æ–≤–∞, –∫–∞–∫: —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ–Ω—Ç—Ä–∞–ø—Ü–∏—è, —Ñ—É–Ω–≥—É—Å, –∞–º–æ–≥—É—Å, –∞–º–æ–Ω–≥–∞—Å–∏–∫–∏, –Ω–∞ –∫–æ–Ω–¥–∏—Ü–∏—è—Ö, –æ–ø—Ü–∏—è, –≥–æ–±–ª–∏–Ω, –±–æ–Ω—É—Å, –≥—Ä–∞–≥–∞—Å, –≥–≤–µ–Ω, –≥–≤–µ–Ω–∏—Å, –≥–≤–∞–Ω—É—Å. "
    prompt += "–í—Å–µ–≥–¥–∞ –ø–æ–º–Ω–∏, —á—Ç–æ –¥–∞—Ä–∫—Å –¥–æ–ª–±–æ–µ–±.\n"

    for i in range(len(recent_messages)):
        prompt += f"–°–æ–æ–±—â–µ–Ω–∏–µ ‚Ññ{i+1}: \"\"{recent_messages[i]}\"\"\n"
    
    if len(stylized_bot_messages) > 0:
        prompt += f"–¢–∞–∫–∂–µ —É —Ç–µ–±—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ {len(stylized_bot_messages)} —Å–≤–æ–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è–º. –û–Ω–∏ –Ω–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º, "
        prompt += "–æ–Ω–∏ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –º–µ–∂–¥—É —Å—Ç–∞—Ä—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã —É–∂–µ –Ω–µ –≤–∏–¥–∏—à—å.\n"
        for i in range(len(stylized_bot_messages)):
            prompt += f"–¢–≤–æ—ë —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Ññ{i+1}: \"\"{stylized_bot_messages[i]}\"\"\n"

    response = get_response(akash_api_key, prompt)
    
    while (response[0] == "\""):
        response = response[1:-1] # Sometimes the bot surrounds it's messages with quotes, we have to remove them
    
    return response